<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>LCOV - total_coverage.info - src/wallet/init.cpp</title>
  <link rel="stylesheet" type="text/css" href="../../gcov.css">
</head>

<body>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="title">LCOV - code coverage report</td></tr>
    <tr><td class="ruler"><img src="../../glass.png" width=3 height=3 alt=""></td></tr>

    <tr>
      <td width="100%">
        <table cellpadding=1 border=0 width="100%">
          <tr>
            <td width="10%" class="headerItem">Current view:</td>
            <td width="35%" class="headerValue"><a href="../../index.html">top level</a> - <a href="index.html">src/wallet</a> - init.cpp<span style="font-size: 80%;"> (source / <a href="init.cpp.func-sort-c.html">functions</a>)</span></td>
            <td width="5%"></td>
            <td width="15%"></td>
            <td width="10%" class="headerCovTableHead">Hit</td>
            <td width="10%" class="headerCovTableHead">Total</td>
            <td width="15%" class="headerCovTableHead">Coverage</td>
          </tr>
          <tr>
            <td class="headerItem">Test:</td>
            <td class="headerValue">total_coverage.info</td>
            <td></td>
            <td class="headerItem">Lines:</td>
            <td class="headerCovTableEntry">54</td>
            <td class="headerCovTableEntry">58</td>
            <td class="headerCovTableEntryHi">93.1 %</td>
          </tr>
          <tr>
            <td class="headerItem">Date:</td>
            <td class="headerValue">2000-01-01 12:00:00</td>
            <td></td>
            <td class="headerItem">Functions:</td>
            <td class="headerCovTableEntry">4</td>
            <td class="headerCovTableEntry">4</td>
            <td class="headerCovTableEntryHi">100.0 %</td>
          </tr>
          <tr>
            <td></td>
            <td></td>
            <td></td>
            <td class="headerItem">Branches:</td>
            <td class="headerCovTableEntry">110</td>
            <td class="headerCovTableEntry">238</td>
            <td class="headerCovTableEntryLo">46.2 %</td>
          </tr>
          <tr><td><img src="../../glass.png" width=3 height=3 alt=""></td></tr>
        </table>
      </td>
    </tr>

    <tr><td class="ruler"><img src="../../glass.png" width=3 height=3 alt=""></td></tr>
  </table>

  <table cellpadding=0 cellspacing=0 border=0>
    <tr>
      <td><br></td>
    </tr>
    <tr>
      <td>
<pre class="sourceHeading">           Branch data     Line data    Source code</pre>
<pre class="source">
<a name="1"><span class="lineNum">       1 </span>                :            : // Copyright (c) 2009-2010 Satoshi Nakamoto</a>
<a name="2"><span class="lineNum">       2 </span>                :            : // Copyright (c) 2009-2021 The Bitcoin Core developers</a>
<a name="3"><span class="lineNum">       3 </span>                :            : // Distributed under the MIT software license, see the accompanying</a>
<a name="4"><span class="lineNum">       4 </span>                :            : // file COPYING or http://www.opensource.org/licenses/mit-license.php.</a>
<a name="5"><span class="lineNum">       5 </span>                :            : </a>
<a name="6"><span class="lineNum">       6 </span>                :            : #include &lt;init.h&gt;</a>
<a name="7"><span class="lineNum">       7 </span>                :            : #include &lt;interfaces/chain.h&gt;</a>
<a name="8"><span class="lineNum">       8 </span>                :            : #include &lt;interfaces/init.h&gt;</a>
<a name="9"><span class="lineNum">       9 </span>                :            : #include &lt;interfaces/wallet.h&gt;</a>
<a name="10"><span class="lineNum">      10 </span>                :            : #include &lt;net.h&gt;</a>
<a name="11"><span class="lineNum">      11 </span>                :            : #include &lt;node/context.h&gt;</a>
<a name="12"><span class="lineNum">      12 </span>                :            : #include &lt;node/ui_interface.h&gt;</a>
<a name="13"><span class="lineNum">      13 </span>                :            : #include &lt;outputtype.h&gt;</a>
<a name="14"><span class="lineNum">      14 </span>                :            : #include &lt;univalue.h&gt;</a>
<a name="15"><span class="lineNum">      15 </span>                :            : #include &lt;util/check.h&gt;</a>
<a name="16"><span class="lineNum">      16 </span>                :            : #include &lt;util/moneystr.h&gt;</a>
<a name="17"><span class="lineNum">      17 </span>                :            : #include &lt;util/system.h&gt;</a>
<a name="18"><span class="lineNum">      18 </span>                :            : #include &lt;util/translation.h&gt;</a>
<a name="19"><span class="lineNum">      19 </span>                :            : #ifdef USE_BDB</a>
<a name="20"><span class="lineNum">      20 </span>                :            : #include &lt;wallet/bdb.h&gt;</a>
<a name="21"><span class="lineNum">      21 </span>                :            : #endif</a>
<a name="22"><span class="lineNum">      22 </span>                :            : #include &lt;wallet/coincontrol.h&gt;</a>
<a name="23"><span class="lineNum">      23 </span>                :            : #include &lt;wallet/wallet.h&gt;</a>
<a name="24"><span class="lineNum">      24 </span>                :            : #include &lt;walletinitinterface.h&gt;</a>
<a name="25"><span class="lineNum">      25 </span>                :            : </a>
<a name="26"><span class="lineNum">      26 </span>                :            : using node::NodeContext;</a>
<a name="27"><span class="lineNum">      27 </span>                :            : </a>
<a name="28"><span class="lineNum">      28 </span>                :            : namespace wallet {</a>
<a name="29"><span class="lineNum">      29 </span>                :            : class WalletInit : public WalletInitInterface</a>
<a name="30"><span class="lineNum">      30 </span>                :            : {</a>
<a name="31"><span class="lineNum">      31 </span>                :            : public:</a>
<a name="32"><span class="lineNum">      32 </span>                :            :     //! Was the wallet component compiled in.</a>
<a name="33"><span class="lineNum">      33 </span>                :<span class="lineCov">       1624 :     bool HasWalletSupport() const override {return true;}</span></a>
<a name="34"><span class="lineNum">      34 </span>                :            : </a>
<a name="35"><span class="lineNum">      35 </span>                :            :     //! Return the wallets help message.</a>
<a name="36"><span class="lineNum">      36 </span>                :            :     void AddWalletOptions(ArgsManager&amp; argsman) const override;</a>
<a name="37"><span class="lineNum">      37 </span>                :            : </a>
<a name="38"><span class="lineNum">      38 </span>                :            :     //! Wallets parameter interaction</a>
<a name="39"><span class="lineNum">      39 </span>                :            :     bool ParameterInteraction() const override;</a>
<a name="40"><span class="lineNum">      40 </span>                :            : </a>
<a name="41"><span class="lineNum">      41 </span>                :            :     //! Add wallets that should be opened to list of chain clients.</a>
<a name="42"><span class="lineNum">      42 </span>                :            :     void Construct(NodeContext&amp; node) const override;</a>
<a name="43"><span class="lineNum">      43 </span>                :            : };</a>
<a name="44"><span class="lineNum">      44 </span>                :            : </a>
<a name="45"><span class="lineNum">      45 </span>                :<span class="lineCov">       1351 : void WalletInit::AddWalletOptions(ArgsManager&amp; argsman) const</span></a>
<a name="46"><span class="lineNum">      46 </span>                :            : {</a>
<a name="47"><span class="lineNum">      47 </span>  [<span class="branchCov" title="Branch 0 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 1 was not taken"> - </span><span class="branchCov" title="Branch 2 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 3 was not taken"> - </span>]:<span class="lineCov">       2702 :     argsman.AddArg(&quot;-addresstype&quot;, strprintf(&quot;What type of addresses to use (\&quot;legacy\&quot;, \&quot;p2sh-segwit\&quot;, \&quot;bech32\&quot;, or \&quot;bech32m\&quot;, default: \&quot;%s\&quot;)&quot;, FormatOutputType(DEFAULT_ADDRESS_TYPE)), ArgsManager::ALLOW_ANY, OptionsCategory::WALLET);</span></a>
<a name="48"><span class="lineNum">      48 </span>  [<span class="branchCov" title="Branch 0 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 1 was not taken"> - </span><span class="branchCov" title="Branch 2 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 3 was not taken"> - </span>]:<span class="lineCov">       2702 :     argsman.AddArg(&quot;-avoidpartialspends&quot;, strprintf(&quot;Group outputs by address, selecting many (possibly all) or none, instead of selecting on a per-output basis. Privacy is improved as addresses are mostly swept with fewer transactions and outputs are aggregated in clean change addresses. It may result in higher fees due to less optimal coin selection caused by this added limitation and possibly a larger-than-necessary number of inputs being used. Always enabled for wallets with \&quot;avoid_reuse\&quot; enabled, otherwise default: %u.&quot;, DEFAULT_AVOIDPARTIALSPENDS), ArgsManager::ALLOW_ANY, OptionsCategory::WALLET);</span></a>
<a name="49"><span class="lineNum">      49 </span>        [<span class="branchCov" title="Branch 0 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 1 was not taken"> - </span>]:<span class="lineCov">       1351 :     argsman.AddArg(&quot;-changetype&quot;,</span></a>
<a name="50"><span class="lineNum">      50 </span>                :            :                    &quot;What type of change to use (\&quot;legacy\&quot;, \&quot;p2sh-segwit\&quot;, \&quot;bech32\&quot;, or \&quot;bech32m\&quot;). Default is \&quot;legacy\&quot; when &quot;</a>
<a name="51"><span class="lineNum">      51 </span>                :            :                    &quot;-addresstype=legacy, else it is an implementation detail.&quot;,</a>
<a name="52"><span class="lineNum">      52 </span>  [<span class="branchCov" title="Branch 0 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 1 was not taken"> - </span><span class="branchCov" title="Branch 2 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 3 was not taken"> - </span>]:<span class="lineCov">       4053 :                    ArgsManager::ALLOW_ANY, OptionsCategory::WALLET);</span></a>
<a name="53"><span class="lineNum">      53 </span>  [<span class="branchCov" title="Branch 0 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 1 was not taken"> - </span><span class="branchCov" title="Branch 2 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 3 was not taken"> - </span> :<span class="lineCov">       2702 :     argsman.AddArg(&quot;-consolidatefeerate=&lt;amt&gt;&quot;, strprintf(&quot;The maximum feerate (in %s/kvB) at which transaction building may use more inputs than strictly necessary so that the wallet's UTXO pool can be reduced (default: %s).&quot;, CURRENCY_UNIT, FormatMoney(DEFAULT_CONSOLIDATE_FEERATE)), ArgsManager::ALLOW_ANY, OptionsCategory::WALLET);</span></a>
<span class="lineNum">         </span>         <span class="branchCov" title="Branch 4 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 5 was not taken"> - </span>]
<a name="54"><span class="lineNum">      54 </span>  [<span class="branchCov" title="Branch 0 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 1 was not taken"> - </span><span class="branchCov" title="Branch 2 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 3 was not taken"> - </span> :<span class="lineCov">       2702 :     argsman.AddArg(&quot;-disablewallet&quot;, &quot;Do not load the wallet and disable wallet RPC calls&quot;, ArgsManager::ALLOW_ANY, OptionsCategory::WALLET);</span></a>
<span class="lineNum">         </span>         <span class="branchCov" title="Branch 4 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 5 was not taken"> - </span>]
<a name="55"><span class="lineNum">      55 </span>        [<span class="branchCov" title="Branch 0 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 1 was not taken"> - </span>]:<span class="lineCov">       2702 :     argsman.AddArg(&quot;-discardfee=&lt;amt&gt;&quot;, strprintf(&quot;The fee rate (in %s/kvB) that indicates your tolerance for discarding change by adding it to the fee (default: %s). &quot;</span></a>
<a name="56"><span class="lineNum">      56 </span>                :            :                                                                 &quot;Note: An output is discarded if it is dust at this rate, but we will always discard up to the dust relay fee and a discard fee above that is limited by the fee estimate for the longest target&quot;,</a>
<a name="57"><span class="lineNum">      57 </span>  [<span class="branchCov" title="Branch 0 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 1 was not taken"> - </span><span class="branchCov" title="Branch 2 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 3 was not taken"> - </span>]:<span class="lineCov">       4053 :                                                               CURRENCY_UNIT, FormatMoney(DEFAULT_DISCARD_FEE)), ArgsManager::ALLOW_ANY, OptionsCategory::WALLET);</span></a>
<a name="58"><span class="lineNum">      58 </span>                :            : </a>
<a name="59"><span class="lineNum">      59 </span>        [<span class="branchCov" title="Branch 0 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 1 was not taken"> - </span>]:<span class="lineCov">       2702 :     argsman.AddArg(&quot;-fallbackfee=&lt;amt&gt;&quot;, strprintf(&quot;A fee rate (in %s/kvB) that will be used when fee estimation has insufficient data. 0 to entirely disable the fallbackfee feature. (default: %s)&quot;,</span></a>
<a name="60"><span class="lineNum">      60 </span>  [<span class="branchCov" title="Branch 0 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 1 was not taken"> - </span><span class="branchCov" title="Branch 2 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 3 was not taken"> - </span>]:<span class="lineCov">       4053 :                                                                CURRENCY_UNIT, FormatMoney(DEFAULT_FALLBACK_FEE)), ArgsManager::ALLOW_ANY, OptionsCategory::WALLET);</span></a>
<a name="61"><span class="lineNum">      61 </span>  [<span class="branchCov" title="Branch 0 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 1 was not taken"> - </span><span class="branchCov" title="Branch 2 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 3 was not taken"> - </span>]:<span class="lineCov">       2702 :     argsman.AddArg(&quot;-keypool=&lt;n&gt;&quot;, strprintf(&quot;Set key pool size to &lt;n&gt; (default: %u). Warning: Smaller sizes may increase the risk of losing funds when restoring from an old backup, if none of the addresses in the original keypool have been used.&quot;, DEFAULT_KEYPOOL_SIZE), ArgsManager::ALLOW_ANY, OptionsCategory::WALLET);</span></a>
<a name="62"><span class="lineNum">      62 </span>  [<span class="branchCov" title="Branch 0 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 1 was not taken"> - </span><span class="branchCov" title="Branch 2 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 3 was not taken"> - </span> :<span class="lineCov">       2702 :     argsman.AddArg(&quot;-maxapsfee=&lt;n&gt;&quot;, strprintf(&quot;Spend up to this amount in additional (absolute) fees (in %s) if it allows the use of partial spend avoidance (default: %s)&quot;, CURRENCY_UNIT, FormatMoney(DEFAULT_MAX_AVOIDPARTIALSPEND_FEE)), ArgsManager::ALLOW_ANY, OptionsCategory::WALLET);</span></a>
<span class="lineNum">         </span>         <span class="branchCov" title="Branch 4 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 5 was not taken"> - </span>]
<a name="63"><span class="lineNum">      63 </span>        [<span class="branchCov" title="Branch 0 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 1 was not taken"> - </span>]:<span class="lineCov">       2702 :     argsman.AddArg(&quot;-maxtxfee=&lt;amt&gt;&quot;, strprintf(&quot;Maximum total fees (in %s) to use in a single wallet transaction; setting this too low may abort large transactions (default: %s)&quot;,</span></a>
<a name="64"><span class="lineNum">      64 </span>  [<span class="branchCov" title="Branch 0 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 1 was not taken"> - </span><span class="branchCov" title="Branch 2 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 3 was not taken"> - </span>]:<span class="lineCov">       4053 :         CURRENCY_UNIT, FormatMoney(DEFAULT_TRANSACTION_MAXFEE)), ArgsManager::ALLOW_ANY, OptionsCategory::DEBUG_TEST);</span></a>
<a name="65"><span class="lineNum">      65 </span>        [<span class="branchCov" title="Branch 0 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 1 was not taken"> - </span>]:<span class="lineCov">       2702 :     argsman.AddArg(&quot;-mintxfee=&lt;amt&gt;&quot;, strprintf(&quot;Fee rates (in %s/kvB) smaller than this are considered zero fee for transaction creation (default: %s)&quot;,</span></a>
<a name="66"><span class="lineNum">      66 </span>  [<span class="branchCov" title="Branch 0 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 1 was not taken"> - </span><span class="branchCov" title="Branch 2 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 3 was not taken"> - </span>]:<span class="lineCov">       4053 :                                                             CURRENCY_UNIT, FormatMoney(DEFAULT_TRANSACTION_MINFEE)), ArgsManager::ALLOW_ANY, OptionsCategory::WALLET);</span></a>
<a name="67"><span class="lineNum">      67 </span>        [<span class="branchCov" title="Branch 0 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 1 was not taken"> - </span>]:<span class="lineCov">       2702 :     argsman.AddArg(&quot;-paytxfee=&lt;amt&gt;&quot;, strprintf(&quot;Fee rate (in %s/kvB) to add to transactions you send (default: %s)&quot;,</span></a>
<a name="68"><span class="lineNum">      68 </span>  [<span class="branchCov" title="Branch 0 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 1 was not taken"> - </span><span class="branchCov" title="Branch 2 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 3 was not taken"> - </span>]:<span class="lineCov">       4053 :                                                             CURRENCY_UNIT, FormatMoney(CFeeRate{DEFAULT_PAY_TX_FEE}.GetFeePerK())), ArgsManager::ALLOW_ANY, OptionsCategory::WALLET);</span></a>
<a name="69"><span class="lineNum">      69 </span>                :            : #ifdef ENABLE_EXTERNAL_SIGNER</a>
<a name="70"><span class="lineNum">      70 </span>  [<span class="branchCov" title="Branch 0 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 1 was not taken"> - </span><span class="branchCov" title="Branch 2 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 3 was not taken"> - </span> :<span class="lineCov">       2702 :     argsman.AddArg(&quot;-signer=&lt;cmd&gt;&quot;, &quot;External signing tool, see doc/external-signer.md&quot;, ArgsManager::ALLOW_ANY, OptionsCategory::WALLET);</span></a>
<span class="lineNum">         </span>         <span class="branchCov" title="Branch 4 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 5 was not taken"> - </span>]
<a name="71"><span class="lineNum">      71 </span>                :            : #endif</a>
<a name="72"><span class="lineNum">      72 </span>  [<span class="branchCov" title="Branch 0 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 1 was not taken"> - </span><span class="branchCov" title="Branch 2 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 3 was not taken"> - </span>]:<span class="lineCov">       2702 :     argsman.AddArg(&quot;-spendzeroconfchange&quot;, strprintf(&quot;Spend unconfirmed change when sending transactions (default: %u)&quot;, DEFAULT_SPEND_ZEROCONF_CHANGE), ArgsManager::ALLOW_ANY, OptionsCategory::WALLET);</span></a>
<a name="73"><span class="lineNum">      73 </span>  [<span class="branchCov" title="Branch 0 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 1 was not taken"> - </span><span class="branchCov" title="Branch 2 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 3 was not taken"> - </span>]:<span class="lineCov">       2702 :     argsman.AddArg(&quot;-txconfirmtarget=&lt;n&gt;&quot;, strprintf(&quot;If paytxfee is not set, include enough fee so transactions begin confirmation on average within n blocks (default: %u)&quot;, DEFAULT_TX_CONFIRM_TARGET), ArgsManager::ALLOW_ANY, OptionsCategory::WALLET);</span></a>
<a name="74"><span class="lineNum">      74 </span>  [<span class="branchCov" title="Branch 0 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 1 was not taken"> - </span><span class="branchCov" title="Branch 2 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 3 was not taken"> - </span> :<span class="lineCov">       2702 :     argsman.AddArg(&quot;-wallet=&lt;path&gt;&quot;, &quot;Specify wallet path to load at startup. Can be used multiple times to load multiple wallets. Path is to a directory containing wallet data and log files. If the path is not absolute, it is interpreted relative to &lt;walletdir&gt;. This only loads existing wallets and does not create new ones. For backwards compatibility this also accepts names of existing top-level data files in &lt;walletdir&gt;.&quot;, ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::WALLET);</span></a>
<span class="lineNum">         </span>         <span class="branchCov" title="Branch 4 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 5 was not taken"> - </span>]
<a name="75"><span class="lineNum">      75 </span>  [<span class="branchCov" title="Branch 0 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 1 was not taken"> - </span><span class="branchCov" title="Branch 2 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 3 was not taken"> - </span>]:<span class="lineCov">       2702 :     argsman.AddArg(&quot;-walletbroadcast&quot;,  strprintf(&quot;Make the wallet broadcast transactions (default: %u)&quot;, DEFAULT_WALLETBROADCAST), ArgsManager::ALLOW_ANY, OptionsCategory::WALLET);</span></a>
<a name="76"><span class="lineNum">      76 </span>  [<span class="branchCov" title="Branch 0 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 1 was not taken"> - </span><span class="branchCov" title="Branch 2 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 3 was not taken"> - </span> :<span class="lineCov">       2702 :     argsman.AddArg(&quot;-walletdir=&lt;dir&gt;&quot;, &quot;Specify directory to hold wallets (default: &lt;datadir&gt;/wallets if it exists, otherwise &lt;datadir&gt;)&quot;, ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::WALLET);</span></a>
<span class="lineNum">         </span>         <span class="branchCov" title="Branch 4 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 5 was not taken"> - </span>]
<a name="77"><span class="lineNum">      77 </span>                :            : #if HAVE_SYSTEM</a>
<a name="78"><span class="lineNum">      78 </span>  [<span class="branchCov" title="Branch 0 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 1 was not taken"> - </span><span class="branchCov" title="Branch 2 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 3 was not taken"> - </span> :<span class="lineCov">       2702 :     argsman.AddArg(&quot;-walletnotify=&lt;cmd&gt;&quot;, &quot;Execute command when a wallet transaction changes. %s in cmd is replaced by TxID, %w is replaced by wallet name, %b is replaced by the hash of the block including the transaction (set to 'unconfirmed' if the transaction is not included) and %h is replaced by the block height (-1 if not included). %w is not currently implemented on windows. On systems where %w is supported, it should NOT be quoted because this would break shell escaping used to invoke the command.&quot;, ArgsManager::ALLOW_ANY, OptionsCategory::WALLET);</span></a>
<span class="lineNum">         </span>         <span class="branchCov" title="Branch 4 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 5 was not taken"> - </span>]
<a name="79"><span class="lineNum">      79 </span>                :            : #endif</a>
<a name="80"><span class="lineNum">      80 </span>  [<span class="branchCov" title="Branch 0 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 1 was not taken"> - </span><span class="branchCov" title="Branch 2 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 3 was not taken"> - </span>]:<span class="lineCov">       2702 :     argsman.AddArg(&quot;-walletrbf&quot;, strprintf(&quot;Send transactions with full-RBF opt-in enabled (RPC only, default: %u)&quot;, DEFAULT_WALLET_RBF), ArgsManager::ALLOW_ANY, OptionsCategory::WALLET);</span></a>
<a name="81"><span class="lineNum">      81 </span>                :            : </a>
<a name="82"><span class="lineNum">      82 </span>                :            : #ifdef USE_BDB</a>
<a name="83"><span class="lineNum">      83 </span>  [<span class="branchCov" title="Branch 0 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 1 was not taken"> - </span><span class="branchCov" title="Branch 2 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 3 was not taken"> - </span> :<span class="lineCov">       2702 :     argsman.AddArg(&quot;-dblogsize=&lt;n&gt;&quot;, strprintf(&quot;Flush wallet database activity from memory to disk log every &lt;n&gt; megabytes (default: %u)&quot;, DatabaseOptions().max_log_mb), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::WALLET_DEBUG_TEST);</span></a>
<span class="lineNum">         </span>         <span class="branchCov" title="Branch 4 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 5 was not taken"> - </span>]
<a name="84"><span class="lineNum">      84 </span>  [<span class="branchCov" title="Branch 0 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 1 was not taken"> - </span><span class="branchCov" title="Branch 2 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 3 was not taken"> - </span>]:<span class="lineCov">       2702 :     argsman.AddArg(&quot;-flushwallet&quot;, strprintf(&quot;Run a thread to flush wallet periodically (default: %u)&quot;, DEFAULT_FLUSHWALLET), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::WALLET_DEBUG_TEST);</span></a>
<a name="85"><span class="lineNum">      85 </span>  [<span class="branchCov" title="Branch 0 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 1 was not taken"> - </span><span class="branchCov" title="Branch 2 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 3 was not taken"> - </span> :<span class="lineCov">       2702 :     argsman.AddArg(&quot;-privdb&quot;, strprintf(&quot;Sets the DB_PRIVATE flag in the wallet db environment (default: %u)&quot;, !DatabaseOptions().use_shared_memory), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::WALLET_DEBUG_TEST);</span></a>
<span class="lineNum">         </span>         <span class="branchCov" title="Branch 4 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 5 was not taken"> - </span>]
<a name="86"><span class="lineNum">      86 </span>                :            : #else</a>
<a name="87"><span class="lineNum">      87 </span>                :            :     argsman.AddHiddenArgs({&quot;-dblogsize&quot;, &quot;-flushwallet&quot;, &quot;-privdb&quot;});</a>
<a name="88"><span class="lineNum">      88 </span>                :            : #endif</a>
<a name="89"><span class="lineNum">      89 </span>                :            : </a>
<a name="90"><span class="lineNum">      90 </span>                :            : #ifdef USE_SQLITE</a>
<a name="91"><span class="lineNum">      91 </span>  [<span class="branchCov" title="Branch 0 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 1 was not taken"> - </span><span class="branchCov" title="Branch 2 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 3 was not taken"> - </span> :<span class="lineCov">       2702 :     argsman.AddArg(&quot;-unsafesqlitesync&quot;, &quot;Set SQLite synchronous=OFF to disable waiting for the database to sync to disk. This is unsafe and can cause data loss and corruption. This option is only used by tests to improve their performance (default: false)&quot;, ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::WALLET_DEBUG_TEST);</span></a>
<span class="lineNum">         </span>         <span class="branchCov" title="Branch 4 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 5 was not taken"> - </span>]
<a name="92"><span class="lineNum">      92 </span>                :            : #else</a>
<a name="93"><span class="lineNum">      93 </span>                :            :     argsman.AddHiddenArgs({&quot;-unsafesqlitesync&quot;});</a>
<a name="94"><span class="lineNum">      94 </span>                :            : #endif</a>
<a name="95"><span class="lineNum">      95 </span>                :            : </a>
<a name="96"><span class="lineNum">      96 </span>  [<span class="branchCov" title="Branch 0 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 1 was not taken"> - </span><span class="branchCov" title="Branch 2 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 3 was not taken"> - </span>]:<span class="lineCov">       2702 :     argsman.AddArg(&quot;-walletrejectlongchains&quot;, strprintf(&quot;Wallet will not create transactions that violate mempool chain limits (default: %u)&quot;, DEFAULT_WALLET_REJECT_LONG_CHAINS), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::WALLET_DEBUG_TEST);</span></a>
<a name="97"><span class="lineNum">      97 </span>  [<span class="branchCov" title="Branch 0 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 1 was not taken"> - </span><span class="branchCov" title="Branch 2 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 3 was not taken"> - </span>]:<span class="lineCov">       2702 :     argsman.AddArg(&quot;-walletcrosschain&quot;, strprintf(&quot;Allow reusing wallet files across chains (default: %u)&quot;, DEFAULT_WALLETCROSSCHAIN), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::WALLET_DEBUG_TEST);</span></a>
<a name="98"><span class="lineNum">      98 </span>                :            : </a>
<a name="99"><span class="lineNum">      99 </span>  [<span class="branchCov" title="Branch 0 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 1 was not taken"> - </span><span class="branchCov" title="Branch 2 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 3 was not taken"> - </span> :<span class="lineCov">       4053 :     argsman.AddHiddenArgs({&quot;-zapwallettxes&quot;});</span></a>
<span class="lineNum">         </span><span class="branchCov" title="Branch 4 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 5 was not taken"> - </span><span class="branchCov" title="Branch 6 was taken 1351 times"> + </span><span class="branchCov" title="Branch 7 was taken 1351 times"> + </span><span class="branchNoCov" title="Branch 8 was not taken"> - </span> 
<span class="lineNum">         </span>            <span class="branchNoCov" title="Branch 9 was not taken"> - </span>]
<a name="100"><span class="lineNum">     100 </span>                :<span class="lineCov">       1351 : }</span></a>
<a name="101"><span class="lineNum">     101 </span>                :            : </a>
<a name="102"><span class="lineNum">     102 </span>                :<span class="lineCov">       1321 : bool WalletInit::ParameterInteraction() const</span></a>
<a name="103"><span class="lineNum">     103 </span>                :            : {</a>
<a name="104"><span class="lineNum">     104 </span>                :            : #ifdef USE_BDB</a>
<a name="105"><span class="lineNum">     105 </span>        [<span class="branchNoCov" title="Branch 0 was not taken"> - </span><span class="branchCov" title="Branch 1 was taken 1321 times"> + </span>]:<span class="lineCov">       1321 :      if (!BerkeleyDatabaseSanityCheck()) {</span></a>
<a name="106"><span class="lineNum">     106 </span>  [<span class="branchNoExec" title="Branch 0 was not executed"> # </span><span class="branchNoExec" title="Branch 1 was not executed"> # </span><span class="branchNoExec" title="Branch 2 was not executed"> # </span><span class="branchNoExec" title="Branch 3 was not executed"> # </span> :<span class="lineNoCov">          0 :          return InitError(Untranslated(&quot;A version conflict was detected between the run-time BerkeleyDB library and the one used during compilation.&quot;));</span></a>
<span class="lineNum">         </span>         <span class="branchNoExec" title="Branch 4 was not executed"> # </span><span class="branchNoExec" title="Branch 5 was not executed"> # </span>]
<a name="107"><span class="lineNum">     107 </span>                :            :      }</a>
<a name="108"><span class="lineNum">     108 </span>                :            : #endif</a>
<a name="109"><span class="lineNum">     109 </span>  [<span class="branchCov" title="Branch 0 was taken 1321 times"> + </span><span class="branchNoCov" title="Branch 1 was not taken"> - </span><span class="branchCov" title="Branch 2 was taken 1321 times"> + </span><span class="branchNoCov" title="Branch 3 was not taken"> - </span> :<span class="lineCov">       2642 :     if (gArgs.GetBoolArg(&quot;-disablewallet&quot;, DEFAULT_DISABLE_WALLET)) {</span></a>
<span class="lineNum">         </span>         <span class="branchCov" title="Branch 4 was taken 14 times"> + </span><span class="branchCov" title="Branch 5 was taken 1307 times"> + </span>]
<a name="110"><span class="lineNum">     110 </span>  [<span class="branchCov" title="Branch 0 was taken 14 times"> + </span><span class="branchNoCov" title="Branch 1 was not taken"> - </span><span class="branchCov" title="Branch 2 was taken 14 times"> + </span><span class="branchNoCov" title="Branch 3 was not taken"> - </span> :<span class="lineCov">         28 :         for (const std::string&amp; wallet : gArgs.GetArgs(&quot;-wallet&quot;)) {</span></a>
<span class="lineNum">         </span>         <span class="branchNoCov" title="Branch 4 was not taken"> - </span><span class="branchCov" title="Branch 5 was taken 14 times"> + </span>]
<a name="111"><span class="lineNum">     111 </span>  [<span class="branchNoExec" title="Branch 0 was not executed"> # </span><span class="branchNoExec" title="Branch 1 was not executed"> # </span><span class="branchNoExec" title="Branch 2 was not executed"> # </span><span class="branchNoExec" title="Branch 3 was not executed"> # </span> :<span class="lineNoCov">          0 :             LogPrintf(&quot;%s: parameter interaction: -disablewallet -&gt; ignoring -wallet=%s\n&quot;, __func__, wallet);</span></a>
<span class="lineNum">         </span>         <span class="branchNoExec" title="Branch 4 was not executed"> # </span><span class="branchNoExec" title="Branch 5 was not executed"> # </span>]
<a name="112"><span class="lineNum">     112 </span>                :            :         }</a>
<a name="113"><span class="lineNum">     113 </span>                :            : </a>
<a name="114"><span class="lineNum">     114 </span>                :<span class="lineCov">         14 :         return true;</span></a>
<a name="115"><span class="lineNum">     115 </span>                :            :     }</a>
<a name="116"><span class="lineNum">     116 </span>                :            : </a>
<a name="117"><span class="lineNum">     117 </span>  [<span class="branchCov" title="Branch 0 was taken 1307 times"> + </span><span class="branchNoCov" title="Branch 1 was not taken"> - </span><span class="branchCov" title="Branch 2 was taken 1307 times"> + </span><span class="branchNoCov" title="Branch 3 was not taken"> - </span> :<span class="lineCov">       5228 :     if (gArgs.GetBoolArg(&quot;-blocksonly&quot;, DEFAULT_BLOCKSONLY) &amp;&amp; gArgs.SoftSetBoolArg(&quot;-walletbroadcast&quot;, false)) {</span></a>
<span class="lineNum">         </span><span class="branchCov" title="Branch 4 was taken 6 times"> + </span><span class="branchCov" title="Branch 5 was taken 1301 times"> + </span><span class="branchCov" title="Branch 6 was taken 6 times"> + </span><span class="branchNoCov" title="Branch 7 was not taken"> - </span><span class="branchCov" title="Branch 8 was taken 6 times"> + </span> 
<span class="lineNum">         </span><span class="branchNoCov" title="Branch 9 was not taken"> - </span><span class="branchCov" title="Branch 10 was taken 6 times"> + </span><span class="branchNoCov" title="Branch 11 was not taken"> - </span><span class="branchCov" title="Branch 12 was taken 6 times"> + </span><span class="branchCov" title="Branch 13 was taken 1301 times"> + </span> 
<span class="lineNum">         </span><span class="branchCov" title="Branch 14 was taken 1307 times"> + </span><span class="branchNoCov" title="Branch 15 was not taken"> - </span><span class="branchCov" title="Branch 16 was taken 6 times"> + </span><span class="branchCov" title="Branch 17 was taken 1301 times"> + </span><span class="branchNoCov" title="Branch 18 was not taken"> - </span> 
<span class="lineNum">         </span>      <span class="branchNoCov" title="Branch 19 was not taken"> - </span><span class="branchNoCov" title="Branch 20 was not taken"> - </span><span class="branchNoCov" title="Branch 21 was not taken"> - </span>]
<a name="118"><span class="lineNum">     118 </span>  [<span class="branchCov" title="Branch 0 was taken 6 times"> + </span><span class="branchNoCov" title="Branch 1 was not taken"> - </span><span class="branchCov" title="Branch 2 was taken 6 times"> + </span><span class="branchNoCov" title="Branch 3 was not taken"> - </span> :<span class="lineCov">         12 :         LogPrintf(&quot;%s: parameter interaction: -blocksonly=1 -&gt; setting -walletbroadcast=0\n&quot;, __func__);</span></a>
<span class="lineNum">         </span>         <span class="branchCov" title="Branch 4 was taken 6 times"> + </span><span class="branchNoCov" title="Branch 5 was not taken"> - </span>]
<a name="119"><span class="lineNum">     119 </span>                :            :     }</a>
<a name="120"><span class="lineNum">     120 </span>                :            : </a>
<a name="121"><span class="lineNum">     121 </span>  [<span class="branchCov" title="Branch 0 was taken 1307 times"> + </span><span class="branchNoCov" title="Branch 1 was not taken"> - </span><span class="branchCov" title="Branch 2 was taken 1307 times"> + </span><span class="branchNoCov" title="Branch 3 was not taken"> - </span> :<span class="lineCov">       2614 :     if (gArgs.IsArgSet(&quot;-zapwallettxes&quot;)) {</span></a>
<span class="lineNum">         </span>         <span class="branchNoCov" title="Branch 4 was not taken"> - </span><span class="branchCov" title="Branch 5 was taken 1307 times"> + </span>]
<a name="122"><span class="lineNum">     122 </span>  [<span class="branchNoExec" title="Branch 0 was not executed"> # </span><span class="branchNoExec" title="Branch 1 was not executed"> # </span><span class="branchNoExec" title="Branch 2 was not executed"> # </span><span class="branchNoExec" title="Branch 3 was not executed"> # </span> :<span class="lineNoCov">          0 :         return InitError(Untranslated(&quot;-zapwallettxes has been removed. If you are attempting to remove a stuck transaction from your wallet, please use abandontransaction instead.&quot;));</span></a>
<span class="lineNum">         </span>         <span class="branchNoExec" title="Branch 4 was not executed"> # </span><span class="branchNoExec" title="Branch 5 was not executed"> # </span>]
<a name="123"><span class="lineNum">     123 </span>                :            :     }</a>
<a name="124"><span class="lineNum">     124 </span>                :            : </a>
<a name="125"><span class="lineNum">     125 </span>  [<span class="branchCov" title="Branch 0 was taken 1307 times"> + </span><span class="branchNoCov" title="Branch 1 was not taken"> - </span><span class="branchCov" title="Branch 2 was taken 1307 times"> + </span><span class="branchNoCov" title="Branch 3 was not taken"> - </span> :<span class="lineCov">       2614 :     if (gArgs.GetBoolArg(&quot;-sysperms&quot;, false))</span></a>
<span class="lineNum">         </span>         <span class="branchNoCov" title="Branch 4 was not taken"> - </span><span class="branchCov" title="Branch 5 was taken 1307 times"> + </span>]
<a name="126"><span class="lineNum">     126 </span>  [<span class="branchNoExec" title="Branch 0 was not executed"> # </span><span class="branchNoExec" title="Branch 1 was not executed"> # </span><span class="branchNoExec" title="Branch 2 was not executed"> # </span><span class="branchNoExec" title="Branch 3 was not executed"> # </span> :<span class="lineNoCov">          0 :         return InitError(Untranslated(&quot;-sysperms is not allowed in combination with enabled wallet functionality&quot;));</span></a>
<span class="lineNum">         </span>         <span class="branchNoExec" title="Branch 4 was not executed"> # </span><span class="branchNoExec" title="Branch 5 was not executed"> # </span>]
<a name="127"><span class="lineNum">     127 </span>                :            : </a>
<a name="128"><span class="lineNum">     128 </span>                :<span class="lineCov">       1307 :     return true;</span></a>
<a name="129"><span class="lineNum">     129 </span>                :            : }</a>
<a name="130"><span class="lineNum">     130 </span>                :            : </a>
<a name="131"><span class="lineNum">     131 </span>                :<span class="lineCov">        815 : void WalletInit::Construct(NodeContext&amp; node) const</span></a>
<a name="132"><span class="lineNum">     132 </span>                :            : {</a>
<a name="133"><span class="lineNum">     133 </span>                :<span class="lineCov">        815 :     ArgsManager&amp; args = *Assert(node.args);</span></a>
<a name="134"><span class="lineNum">     134 </span>  [<span class="branchCov" title="Branch 0 was taken 815 times"> + </span><span class="branchNoCov" title="Branch 1 was not taken"> - </span><span class="branchCov" title="Branch 2 was taken 815 times"> + </span><span class="branchNoCov" title="Branch 3 was not taken"> - </span> :<span class="lineCov">       1630 :     if (args.GetBoolArg(&quot;-disablewallet&quot;, DEFAULT_DISABLE_WALLET)) {</span></a>
<span class="lineNum">         </span>         <span class="branchCov" title="Branch 4 was taken 14 times"> + </span><span class="branchCov" title="Branch 5 was taken 801 times"> + </span>]
<a name="135"><span class="lineNum">     135 </span>  [<span class="branchCov" title="Branch 0 was taken 14 times"> + </span><span class="branchNoCov" title="Branch 1 was not taken"> - </span><span class="branchCov" title="Branch 2 was taken 14 times"> + </span><span class="branchNoCov" title="Branch 3 was not taken"> - </span> :<span class="lineCov">         28 :         LogPrintf(&quot;Wallet disabled!\n&quot;);</span></a>
<span class="lineNum">         </span>         <span class="branchCov" title="Branch 4 was taken 14 times"> + </span><span class="branchNoCov" title="Branch 5 was not taken"> - </span>]
<a name="136"><span class="lineNum">     136 </span>                :<span class="lineCov">         14 :         return;</span></a>
<a name="137"><span class="lineNum">     137 </span>                :            :     }</a>
<a name="138"><span class="lineNum">     138 </span>                :<span class="lineCov">       1602 :     auto wallet_loader = node.init-&gt;makeWalletLoader(*node.chain);</span></a>
<a name="139"><span class="lineNum">     139 </span>                :<span class="lineCov">        801 :     node.wallet_loader = wallet_loader.get();</span></a>
<a name="140"><span class="lineNum">     140 </span>        [<span class="branchCov" title="Branch 0 was taken 801 times"> + </span><span class="branchNoCov" title="Branch 1 was not taken"> - </span>]:<span class="lineCov">        801 :     node.chain_clients.emplace_back(std::move(wallet_loader));</span></a>
<a name="141"><span class="lineNum">     141 </span>                :            : }</a>
<a name="142"><span class="lineNum">     142 </span>                :            : } // namespace wallet</a>
<a name="143"><span class="lineNum">     143 </span>                :            : </a>
<a name="144"><span class="lineNum">     144 </span>                :            : const WalletInitInterface&amp; g_wallet_init_interface = wallet::WalletInit();</a>
</pre>
      </td>
    </tr>
  </table>
  <br>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="ruler"><img src="../../glass.png" width=3 height=3 alt=""></td></tr>
    <tr><td class="versionInfo">Generated by: <a href="http://ltp.sourceforge.net/coverage/lcov.php" target="_parent">LCOV version 1.14</a></td></tr>
  </table>
  <br>

</body>
</html>
